
<div class="card" v-if="first_load_done && session.started">                  
    <div class="card-header fw-bold">                
        <span class="align-middle">Your Results</span>           

    </div>
    <div class="card-body">      

        <div class="row">
            <div class="col text-center mb-4">
                
            </div>
        </div>

        <div class="row mb-4">
            <div class="col">

                <div class="table-responsive">
                    <table class="table table-condensed"> 
                        <thead>
                            <tr>
                                <th scope="col">
                                    
                                </th>
                                <th scope="col">
                                    
                                </th>
                                <th scope="col" class ="text-center" v-bind:colspan="get_current_session_player_part().group_members.length">
                                    Period Reports
                                </th>
                                <th scope="col">
                                    
                                </th>
                                <th scope="col">
                                    
                                </th>
                            </tr>
                            <tr>
                                <th scope="col" class = "text-center">
                                    Period
                                </th>
                                <th scope="col" class = "text-center">
                                    Image Shown to Everyone
                                </th>
                                <th class = "text-center" v-for="(p, index) in get_current_session_player_part().group_members" v-bind:key="'part_a_table_head_'+p.id">
                                    Person [[p.id_label]] <span v-if="p.id==session_player.id">(You)</span>
                                </th>
                                <th scope="col" class = "text-center">
                                    Majority Reported
                                </th>
                                <th scope="col" class = "text-center">
                                    You are in the majority
                                </th>                           
                            </tr>                           
                        </thead>
                        <tbody id="player_list">
                            <tr v-for="(p, index) in get_current_session_player_part().session_player_part_periods" v-bind:key="p.id">
                                <td class="text-nowrap text-center">
                                    [[index+1]]
                                </td>
                                <td class="text-nowrap text-center">
                                    <div>
                                        <img v-bind:src="'/static/' + p.parameter_set_part_period.parameter_set_random_outcome.image" 
                                         class="result_image" />  
                                    </div>
                                    <div>
                                        [[p.parameter_set_part_period.parameter_set_random_outcome.name]]
                                    </div>                                                                          
                                </td>
                                <td class="text-nowrap text-center" style="background-color:ghostwhite;"
                                    v-for="(g, index) in p.group_choices" v-bind:key="'part_a_table_body_'+p.id+'_'+g.id">
                                    <div>
                                        <img v-bind:src="'/static/' + g.choice.image" 
                                             class="result_image" />  
                                    </div>
                                    <div>
                                        [[g.choice.name]]
                                    </div>
                                </td>
                                <td class="text-nowrap text-center">
                                    <div v-if="!p.majority_choice">
                                        No Majority
                                    </div>
                                    <div v-else>
                                        <div>
                                            <img v-bind:src="'/static/' + p.majority_choice.image" 
                                                 class="result_image" />  
                                        </div>
                                        <div>
                                            [[p.majority_choice.name]]
                                        </div> 
                                    </div>                                                                         
                                </td>
                                <td class="text-nowrap text-center">
                                    <div v-if="!p.majority_choice" class="text-danger fw-bold">
                                        No
                                    </div>
                                    <div v-else-if="p.majority_choice.id == p.choice.id">
                                        Yes
                                    </div>
                                    <div v-else class="text-danger fw-bold">
                                        No
                                    </div>
                                </td>
                                                           
                            </tr>
                        </tbody>
                        
                    </table>
                </div>

            </div>
        </div>

        <!-- text -->
        {%include "subject/subject_home/snippets/choice_a_text.html"%}

        <div class="row mt-4">
            <div class="col text-center h5">
                Your earnings for this part: $[[get_current_session_player_part().earnings]]
            </div>
        </div>

        <div class="row mt-4">
            <div class="col">

                <!-- ready to go on -->
                <div class="text-center text-success" v-if="session_player.session_player_parts[session.current_index.part_index].results_complete">
                    <span class="h5">Waiting for others.</span>
                </div>

                <div class="text-center" v-else>
                    <button class="btn btn-outline-success"
                        type="button"
                        title="Finished Reviewing Results"
                        v-bind:disabled="!session.started || reconnecting || working"
                        v-on:click="sendReadyToGoOn()">
                        <span class="h5">
                        Ready to Go On                                                    
                        </span>
                    </button>
                </div>

            </div>
        </div>

        
    </div>                    
</div> 